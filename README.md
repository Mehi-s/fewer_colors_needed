# Image Compressor Web Application

This project is a Flask web application that allows users to compress images by reducing the number of colors using K-Means clustering. Users can also extract images from previously compressed `.npz` files.

## Features

- **Image Compression:** Upload an image and specify the desired number of colors to get a compressed version.
- **Image Extraction:** Upload a `.npz` file (generated by this application) to reconstruct the compressed image.
- **Web Interface:** Easy-to-use interface for uploading and viewing images.

## How it Works

The application uses the K-Means clustering algorithm from `scikit-learn` to reduce the number of colors in an image.
1. The pixels of the uploaded image are treated as data points in a 3D color space (RGB).
2. K-Means clustering groups these pixels into a specified number of clusters (`n_colors`).
3. The centroids of these clusters represent the new dominant colors of the image.
4. Each original pixel is then replaced by the centroid of the cluster it belongs to.
5. The compressed data (cluster labels, centroids, and original image shape) is saved as a `.npz` file.
6. A viewable version of the compressed image (as a PNG) is also generated from this `.npz` file.

## Directory Structure

```
.
├── Dockerfile            # Defines the Docker image for the application
├── README.md             # This file
├── app.py                # Main Flask application logic
├── req.txt               # Python dependencies
├── static/               # Static files served by the application
│   ├── processed/        # Stores compressed .npz files and viewable .png versions
│   └── uploads/          # Stores original uploaded images and .npz files for extraction
├── templates/
│   └── index.html        # HTML template for the web interface
└── lab/                  # Contains Jupyter notebooks and resources for experimentation (optional)
    ├── compressor.py     # Script for image compression logic (likely used in notebook)
    ├── explore.ipynb     # Jupyter notebook for developing/testing the compression
    └── ...               # Sample images and other lab resources
```

## Running Locally

1.  **Clone the repository:**
    ```bash
    git clone <repository_url>
    cd <repository_directory>
    ```
2.  **Create a virtual environment (recommended):**
    ```bash
    python -m venv venv
    source venv/bin/activate  # On Windows use `venv\Scripts\activate`
    ```
3.  **Install dependencies:**
    ```bash
    pip install -r req.txt
    ```
4.  **Run the Flask application:**
    ```bash
    python app.py
    ```
5.  Open your web browser and navigate to `http://localhost:5000`.

## Running with Docker

There are two ways to run the application using Docker:

**Option 1: Build the image locally**

1.  **Build the Docker image:**
    ```bash
    docker build -t image-compressor .
    ```
2.  **Run the Docker container:**
    ```bash
    docker run -p 5000:5000 image-compressor
    ```

**Option 2: Use the pre-built image from Docker Hub**

1.  **Pull the image from Docker Hub:**
    ```bash
    docker pull mehrdads72/fewer_colors_needed
    ```
2.  **Run the Docker container:**
    ```bash
    docker run -p 5000:5000 mehrdads72/fewer_colors_needed
    ```

After running the container using either method, open your web browser and navigate to `http://localhost:5000`.

## API Endpoints

The application provides the following endpoints:

*   **`GET /`**:
    *   Serves the main page with the upload forms.
*   **`POST /compress`**:
    *   Accepts image uploads for compression.
    *   **Form Data Parameters:**
        *   `image`: The image file(s) to be compressed.
        *   `n_colors`: The desired number of colors (integer) for the compressed image.
    *   Returns the main page displaying the original and compressed images.
*   **`POST /extract`**:
    *   Accepts `.npz` file uploads for image extraction.
    *   **Form Data Parameters:**
        *   `npz_file`: The `.npz` file to be extracted.
    *   Returns the main page displaying the extracted image.

## Docker Hub Link
The pre-built Docker image can be found on Docker Hub:
[https://hub.docker.com/repository/docker/mehrdads72/fewer_colors_needed](https://hub.docker.com/repository/docker/mehrdads72/fewer_colors_needed)

## AI usage
Html and README files is AI-generated

